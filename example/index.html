<!DOCTYPE html>
<html>
  <head>
    <title>Convivial Profiler</title>
    <!-- Load ConvivialProfiler. -->
    <script src="../dist/bundle.js"></script>
    <script type="text/javascript">
      // Inject default settings into window
      window.drupalSettings = {};
      window.drupalSettings.convivialProfiler = {"site":"convivial-demo","config":{"prepare":{"client_cleanup":true},"render":{"selector":".convivial-profiler-render","privacy":"<p>This site doesn't share your data. Read the <a href=\"/privacy\">privacy statement</a>."},"trackers":{"pageview":{"publishers":["visits","experience"]}},"processors":{"set":{"description":"Checks query param and saves to storage.","sources":[{"type":"query","key":"set"}],"handlers":[{"type":"current","key":"set","ttl":-1}],"publishers":["set"]},"unset":{"sources":[{"type":"query","key":"unset"}],"handlers":[{"type":"current","key":"unset","ttl":-1}],"publishers":["unset"]},"utm_campaign":{"sources":[{"type":"query","key":"utm_campaign"}],"handlers":[{"type":"current","key":"utm_campaign","ttl":60}],"publishers":["utm_campaign"]},"utm_source":{"sources":[{"type":"query","key":"utm_source"}],"handlers":[{"type":"current","key":"utm_source","ttl":60}],"publishers":["utm_source"]},"utm_medium":{"sources":[{"type":"query","key":"utm_medium"}],"handlers":[{"type":"current","key":"utm_medium","ttl":60}],"publishers":["utm_medium"]},"hour":{"sources":[{"type":"time","key":"hour"}],"handlers":[{"type":"current","key":"hour","ttl":3600}],"publishers":["daytime"]},"author":{"sources":[{"type":"meta","key":"author"}],"handlers":[{"type":"dimension","key":"author","normalize":true},{"type":"datalayer_event","category":"author","action":"view","normalize":true}]},"type":{"sources":[{"type":"meta","key":"type"}],"handlers":[{"type":"dimension","key":"type","normalize":true},{"type":"datalayer_event","category":"type","action":"view","normalize":true}],"publishers":["top_type","top"]},"topic":{"sources":[{"type":"meta","key":"topic"}],"handlers":[{"type":"dimension","key":"topic","normalize":true},{"type":"datalayer_event","category":"topic","action":"view","normalize":true}],"publishers":["top_topic","top"]},"audience":{"sources":[{"type":"meta","key":"audience"}],"handlers":[{"type":"dimension","key":"audience","normalize":true},{"type":"datalayer_event","category":"audience","action":"view","normalize":true}],"publishers":["top_audience","top"]},"lifetime_value":{"sources":[{"type":"meta","key":"price"}],"handlers":[{"type":"accumulation","key":"lifetime_value"}],"publishers":["lifetime_value"]},"intent":{"sources":[{"type":"meta","key":"intent"}],"handlers":[{"type":"current","key":"intent","ttl":60}],"publishers":["intent"]},"goal":{"sources":[{"type":"meta","key":"goal"}],"handlers":[{"type":"current","key":"goal","ttl":-1}],"publishers":["set"]},"location":{"deferred":true,"sources":[{"type":"get","url":"//extreme-ip-lookup.com/json/?key=demo"}],"handlers":[{"type":"extreme_geoip","key":"location","ttl":604800}],"publishers":["location_country","season"]}},"publishers":{"set":{"type":"set","description":"Publish flag for values inside set and goal storage.","paths":["currents.set.value","currents.goal.value"],"key":"set"},"unset":{"type":"unset","description":"Unpublish flag for value inside unset storage.","paths":["currents.unset.value"],"key":"unset"},"visits":{"type":"copy","description":"Publish number of visits from storage.","paths":["counters.pageview"],"key":"visits"},"utm_campaign":{"type":"copy","description":"","paths":["currents.utm_campaign.value"],"remove_empty":true,"key":"utm_campaign"},"utm_source":{"type":"copy","description":"","paths":["currents.utm_source.value"],"remove_empty":true,"key":"utm_source"},"utm_medium":{"type":"copy","description":"","paths":["currents.utm_medium.value"],"remove_empty":true,"key":"utm_medium"},"experience":{"type":"range","description":"","paths":["counters.pageview"],"ranges":[{"key":"experience:none","min":0,"max":2},{"key":"experience:low","min":2,"max":10},{"key":"experience:medium","min":10,"max":100},{"key":"experience:high","min":100,"max":1000000}],"key":"experience"},"daytime":{"type":"range","description":"","paths":["currents.hour.value"],"ranges":[{"key":"daytime:morning","min":6,"max":12},{"key":"daytime:afternoon","min":12,"max":17},{"key":"daytime:evening","min":17,"max":21},{"key":"daytime:night","min":0,"max":6},{"key":"daytime:night","min":21,"max":24}],"key":"daytime"},"top_type":{"type":"top","description":"","paths":["dimensions.type"],"key":"top_type"},"top_topic":{"type":"top","description":"","paths":["dimensions.topic"],"key":"top_topic"},"top_audience":{"type":"top","description":"","paths":["dimensions.audience"],"key":"top_audience"},"top":{"type":"top","description":"","paths":["dimensions.topic","dimensions.audience"],"key":"top"},"lifetime_value":{"type":"copy","description":"","paths":["accumulators.lifetime_value"],"key":"lifetime_value"},"location_country":{"type":"copy","description":"","paths":["fetchers.location.value.country"]},"season":{"type":"season","description":"","paths":["fetchers.location.value.lat"]},"intent":{"type":"copy","description":"","paths":["currents.intent.value"],"remove_empty":true,"key":"intent"}}}};
        // Call the ConvivialProfiler.
      (function (window, ConvivialProfiler, config) {
        window.convivialProfiler = new ConvivialProfiler(config.config, config.site);
        window.convivialProfiler.collect();
        window.convivialProfiler.render();
      })(window, window.ConvivialProfiler.default, drupalSettings.convivialProfiler);
    </script>
    </head>
  <body>
    <div>
      <h1>Convivial Profiler</h1>
    </div>
  </body>
</html>
